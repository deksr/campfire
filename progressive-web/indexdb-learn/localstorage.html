<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title></title>
	<link rel="stylesheet" href="">
</head>
<body>

	<script type="text/javascript" src = "http://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>

	<script>
// lesson 1: local storage a.k.a web storage

  // localStorage.clear(); //this clears the localstorage


// check if the browser supports:
 if(window.localStorage) {
  console.log("local storage can be used");
 }
 else
 {
	console.log("no luck")
 }

// remember that lcoal storage only takes string data
// this sets the value to the keys in local storage
 var names = ["Ray", "Jeanne"]; 
 var namesInobject = [{name: "jill"}, {name: "mary"}]
 localStorage.setItem("names", JSON.stringify(names));
 localStorage.setItem("namesObj", JSON.stringify(namesInobject));


// gets te value from the local storage
 var storedNames = localStorage.getItem("names");
 console.log(storedNames);//this is brought out but its not javscript objects. so to convert it into objects you need to parse it

 console.log(JSON.parse(storedNames));//converted to json
	</script>


<div id="resultDiv"></div>
<button class="buts"> click me to delete the key value pair</button>
	<script>
	// lesson 2
$(document).ready(function() {

	if(window.localStorage) {
    // console.log("local storage can be used");
    var timesVisited = 0;
    var getTheTime = localStorage.getItem("times");

    if (!getTheTime){
     	// console.log("never visited the site");
     	timesVisited = 0

    }
    else{
    	timesVisited = parseInt(getTheTime, 10)
     	timesVisited++

    }
    
    localStorage.setItem("times", JSON.stringify(timesVisited));
    $("#resultDiv").text("You have visited this site " +timesVisited +" times."); 

  }
  
  else
  {
	  console.log("no luck your browser doesn't support local storage")
  }



	$(".buts").on('click',  function(event) {
		 event.preventDefault();
		 localStorage.removeItem("names")
		 localStorage.removeItem("times" )
		 localStorage.removeItem("theperson" )
	});

});
	</script>
<br>
<label> Your Name
<input class="usernameClass"type="text" name="userName">
</label>
 
	<script>
	
	if(window.localStorage){

    //see if the there is an item first. if there is then get the item 
    if(localStorage.getItem("theperson")) {
      var storedName = JSON.parse(localStorage.getItem("theperson"));
      console.log(storedName.name)
      $(".usernameClass").val(storedName.name)
    }

    // on input try to store the item
		$(".usernameClass").on("input", function(e) {
			var personsName = $(".usernameClass").val();
			var personObject = {"name": personsName}
	    localStorage.setItem("theperson", JSON.stringify(personObject));
      console.log("stored")
	  });
	}

	</script>
	
</body>
</html>