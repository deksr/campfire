<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title></title>
	<link rel="stylesheet" href="">
</head>
<body>

	<h1>This is cookie stuff</h1>
	<h1 id="resultDiv"></h1>
	<div id="dateDiv"></div>

	<script type="text/javascript" src = "http://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>

	<script type="text/javascript" src="cookies.js"></script>

	<script>
	// lesson 1:
	// I set cookies
  document.cookie = "cookieNameOne=somevale"


 // making cookies url safe
  name = "beNiceCookie"
  document.cookie = "cookieNameTwo=" + encodeURIComponent(name)

  // adding meta data + only on domain or routes that's needed
  document.cookie = "cookieNameThree=standByMe; expires=Fri, 31 Dec 9999 23:59:59 GMT; domain=somedomain.com"

  // go to console and and type document.cookie and it'll show all the cookies

	</script>
	

	<script>
	// lesson2:

	// var i=1;
	// 	while(i < 10){
 //      console.log("les than");
 //      i++
	// 	}

	$(document).ready(function() { 

		var visited = 0;
        //2) Check to see if we have the cookie called visited2 ...
    if(docCookies.hasItem("visited2")) { //and get it
      visited = docCookies.getItem("visited2");
      console.log(visited)
    }

    visited++; //3)update

    //1)  this sets a fresh new cookie called visited2, number of times, time -infinity. 
    docCookies.setItem("visited2", visited,  Infinity);
    $("#resultDiv").text("You have visited this site "+ visited + " times.");
		
	})



	</script>

	<script>
		// lesson3: cookie value can store date or it can store numbers. This value is what you access and decide what message should appear for the users

	$(document).ready(function() { 
		var $resultDiv = $("#dateDiv");
		var newUser = true;
		var daysSinceLastVisit;
		if(docCookies.hasItem("lastVisit")) { newUser = false;
			var lastVisit = docCookies.getItem("lastVisit");
      var now = new Date();
      var lastVisitDate = new Date(lastVisit);
      //credit: http://stackoverflow.com/a/3224854/52160
      var timeDiff = Math.abs(now.getTime() - lastVisitDate.getTime());var daysSinceLastVisit = Math.ceil(timeDiff / (1000 * 3600 * 24));
    }
    docCookies.setItem("lastVisit", new Date(), Infinity);
		if(newUser) {
		$resultDiv.text("Welcome to the site!");
		} else if(daysSinceLastVisit > 20) { $resultDiv.text("Welcome back to the site!");
		}else{
		$resultDiv.text("Welcome good user!");
		}
  })
	</script>
</body>
</html>